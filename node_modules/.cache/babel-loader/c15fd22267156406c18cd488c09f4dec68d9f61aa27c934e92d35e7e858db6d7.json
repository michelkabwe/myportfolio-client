{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.matchesMiddleware = matchesMiddleware;\nexports.isLocalURL = isLocalURL;\nexports.interpolateAs = interpolateAs;\nexports.resolveHref = resolveHref;\nexports.createKey = createKey;\nexports.default = void 0;\nvar _async_to_generator = require(\"@swc/helpers/lib/_async_to_generator.js\").default;\nvar _extends = require(\"@swc/helpers/lib/_extends.js\").default;\nvar _interop_require_default = require(\"@swc/helpers/lib/_interop_require_default.js\").default;\nvar _interop_require_wildcard = require(\"@swc/helpers/lib/_interop_require_wildcard.js\").default;\nvar _normalizeTrailingSlash = require(\"../../../client/normalize-trailing-slash\");\nvar _removeTrailingSlash = require(\"./utils/remove-trailing-slash\");\nvar _routeLoader = require(\"../../../client/route-loader\");\nvar _script = require(\"../../../client/script\");\nvar _isError = _interop_require_wildcard(require(\"../../../lib/is-error\"));\nvar _denormalizePagePath = require(\"../page-path/denormalize-page-path\");\nvar _normalizeLocalePath = require(\"../i18n/normalize-locale-path\");\nvar _mitt = _interop_require_default(require(\"../mitt\"));\nvar _utils = require(\"../utils\");\nvar _isDynamic = require(\"./utils/is-dynamic\");\nvar _parseRelativeUrl = require(\"./utils/parse-relative-url\");\nvar _querystring = require(\"./utils/querystring\");\nvar _resolveRewrites = _interop_require_default(require(\"./utils/resolve-rewrites\"));\nvar _routeMatcher = require(\"./utils/route-matcher\");\nvar _routeRegex = require(\"./utils/route-regex\");\nvar _formatUrl = require(\"./utils/format-url\");\nvar _detectDomainLocale = require(\"../../../client/detect-domain-locale\");\nvar _parsePath = require(\"./utils/parse-path\");\nvar _addLocale = require(\"../../../client/add-locale\");\nvar _removeLocale = require(\"../../../client/remove-locale\");\nvar _removeBasePath = require(\"../../../client/remove-base-path\");\nvar _addBasePath = require(\"../../../client/add-base-path\");\nvar _hasBasePath = require(\"../../../client/has-base-path\");\nvar _isApiRoute = require(\"../../../lib/is-api-route\");\nvar _getNextPathnameInfo = require(\"./utils/get-next-pathname-info\");\nvar _formatNextPathnameInfo = require(\"./utils/format-next-pathname-info\");\nvar _compareStates = require(\"./utils/compare-states\");\nvar _isBot = require(\"./utils/is-bot\");\nfunction buildCancellationError() {\n  return Object.assign(new Error('Route Cancelled'), {\n    cancelled: true\n  });\n}\nfunction matchesMiddleware(options) {\n  return _matchesMiddleware.apply(this, arguments);\n}\nfunction _matchesMiddleware() {\n  _matchesMiddleware = _async_to_generator(function* (options) {\n    const matchers = yield Promise.resolve(options.router.pageLoader.getMiddleware());\n    if (!matchers) return false;\n    const {\n      pathname: asPathname\n    } = (0, _parsePath).parsePath(options.asPath);\n    // remove basePath first since path prefix has to be in the order of `/${basePath}/${locale}`\n    const cleanedAs = (0, _hasBasePath).hasBasePath(asPathname) ? (0, _removeBasePath).removeBasePath(asPathname) : asPathname;\n    const asWithBasePathAndLocale = (0, _addBasePath).addBasePath((0, _addLocale).addLocale(cleanedAs, options.locale));\n    // Check only path match on client. Matching \"has\" should be done on server\n    // where we can access more info such as headers, HttpOnly cookie, etc.\n    return matchers.some(m => new RegExp(m.regexp).test(asWithBasePathAndLocale));\n  });\n  return _matchesMiddleware.apply(this, arguments);\n}\nfunction stripOrigin(url) {\n  const origin = (0, _utils).getLocationOrigin();\n  return url.startsWith(origin) ? url.substring(origin.length) : url;\n}\nfunction omit(object, keys) {\n  const omitted = {};\n  Object.keys(object).forEach(key => {\n    if (!keys.includes(key)) {\n      omitted[key] = object[key];\n    }\n  });\n  return omitted;\n}\nfunction isLocalURL(url) {\n  // prevent a hydration mismatch on href for url with anchor refs\n  if (!(0, _utils).isAbsoluteUrl(url)) return true;\n  try {\n    // absolute urls can be local if they are on the same origin\n    const locationOrigin = (0, _utils).getLocationOrigin();\n    const resolved = new URL(url, locationOrigin);\n    return resolved.origin === locationOrigin && (0, _hasBasePath).hasBasePath(resolved.pathname);\n  } catch (_) {\n    return false;\n  }\n}\nfunction interpolateAs(route, asPathname, query) {\n  let interpolatedRoute = '';\n  const dynamicRegex = (0, _routeRegex).getRouteRegex(route);\n  const dynamicGroups = dynamicRegex.groups;\n  const dynamicMatches =\n  // Try to match the dynamic route against the asPath\n  (asPathname !== route ? (0, _routeMatcher).getRouteMatcher(dynamicRegex)(asPathname) : '') ||\n  // Fall back to reading the values from the href\n  // TODO: should this take priority; also need to change in the router.\n  query;\n  interpolatedRoute = route;\n  const params = Object.keys(dynamicGroups);\n  if (!params.every(param => {\n    let value = dynamicMatches[param] || '';\n    const {\n      repeat,\n      optional\n    } = dynamicGroups[param];\n    // support single-level catch-all\n    // TODO: more robust handling for user-error (passing `/`)\n    let replaced = `[${repeat ? '...' : ''}${param}]`;\n    if (optional) {\n      replaced = `${!value ? '/' : ''}[${replaced}]`;\n    }\n    if (repeat && !Array.isArray(value)) value = [value];\n    return (optional || param in dynamicMatches) && (\n    // Interpolate group into data URL if present\n    interpolatedRoute = interpolatedRoute.replace(replaced, repeat ? value.map(\n    // these values should be fully encoded instead of just\n    // path delimiter escaped since they are being inserted\n    // into the URL and we expect URL encoded segments\n    // when parsing dynamic route params\n    segment => encodeURIComponent(segment)).join('/') : encodeURIComponent(value)) || '/');\n  })) {\n    interpolatedRoute = '' // did not satisfy all requirements\n    ;\n    // n.b. We ignore this error because we handle warning for this case in\n    // development in the `<Link>` component directly.\n  }\n\n  return {\n    params,\n    result: interpolatedRoute\n  };\n}\nfunction resolveHref(router, href, resolveAs) {\n  // we use a dummy base url for relative urls\n  let base;\n  let urlAsString = typeof href === 'string' ? href : (0, _formatUrl).formatWithValidation(href);\n  // repeated slashes and backslashes in the URL are considered\n  // invalid and will never match a Next.js page/file\n  const urlProtoMatch = urlAsString.match(/^[a-zA-Z]{1,}:\\/\\//);\n  const urlAsStringNoProto = urlProtoMatch ? urlAsString.slice(urlProtoMatch[0].length) : urlAsString;\n  const urlParts = urlAsStringNoProto.split('?');\n  if ((urlParts[0] || '').match(/(\\/\\/|\\\\)/)) {\n    console.error(`Invalid href passed to next/router: ${urlAsString}, repeated forward-slashes (//) or backslashes \\\\ are not valid in the href`);\n    const normalizedUrl = (0, _utils).normalizeRepeatedSlashes(urlAsStringNoProto);\n    urlAsString = (urlProtoMatch ? urlProtoMatch[0] : '') + normalizedUrl;\n  }\n  // Return because it cannot be routed by the Next.js router\n  if (!isLocalURL(urlAsString)) {\n    return resolveAs ? [urlAsString] : urlAsString;\n  }\n  try {\n    base = new URL(urlAsString.startsWith('#') ? router.asPath : router.pathname, 'http://n');\n  } catch (_) {\n    // fallback to / for invalid asPath values e.g. //\n    base = new URL('/', 'http://n');\n  }\n  try {\n    const finalUrl = new URL(urlAsString, base);\n    finalUrl.pathname = (0, _normalizeTrailingSlash).normalizePathTrailingSlash(finalUrl.pathname);\n    let interpolatedAs = '';\n    if ((0, _isDynamic).isDynamicRoute(finalUrl.pathname) && finalUrl.searchParams && resolveAs) {\n      const query = (0, _querystring).searchParamsToUrlQuery(finalUrl.searchParams);\n      const {\n        result,\n        params\n      } = interpolateAs(finalUrl.pathname, finalUrl.pathname, query);\n      if (result) {\n        interpolatedAs = (0, _formatUrl).formatWithValidation({\n          pathname: result,\n          hash: finalUrl.hash,\n          query: omit(query, params)\n        });\n      }\n    }\n    // if the origin didn't change, it means we received a relative href\n    const resolvedHref = finalUrl.origin === base.origin ? finalUrl.href.slice(finalUrl.origin.length) : finalUrl.href;\n    return resolveAs ? [resolvedHref, interpolatedAs || resolvedHref] : resolvedHref;\n  } catch (_1) {\n    return resolveAs ? [urlAsString] : urlAsString;\n  }\n}\nfunction prepareUrlAs(router, url, as) {\n  // If url and as provided as an object representation,\n  // we'll format them into the string version here.\n  let [resolvedHref, resolvedAs] = resolveHref(router, url, true);\n  const origin = (0, _utils).getLocationOrigin();\n  const hrefWasAbsolute = resolvedHref.startsWith(origin);\n  const asWasAbsolute = resolvedAs && resolvedAs.startsWith(origin);\n  resolvedHref = stripOrigin(resolvedHref);\n  resolvedAs = resolvedAs ? stripOrigin(resolvedAs) : resolvedAs;\n  const preparedUrl = hrefWasAbsolute ? resolvedHref : (0, _addBasePath).addBasePath(resolvedHref);\n  const preparedAs = as ? stripOrigin(resolveHref(router, as)) : resolvedAs || resolvedHref;\n  return {\n    url: preparedUrl,\n    as: asWasAbsolute ? preparedAs : (0, _addBasePath).addBasePath(preparedAs)\n  };\n}\nfunction resolveDynamicRoute(pathname, pages) {\n  const cleanPathname = (0, _removeTrailingSlash).removeTrailingSlash((0, _denormalizePagePath).denormalizePagePath(pathname));\n  if (cleanPathname === '/404' || cleanPathname === '/_error') {\n    return pathname;\n  }\n  // handle resolving href for dynamic routes\n  if (!pages.includes(cleanPathname)) {\n    // eslint-disable-next-line array-callback-return\n    pages.some(page => {\n      if ((0, _isDynamic).isDynamicRoute(page) && (0, _routeRegex).getRouteRegex(page).re.test(cleanPathname)) {\n        pathname = page;\n        return true;\n      }\n    });\n  }\n  return (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n}\nfunction getMiddlewareData(source, response, options) {\n  const nextConfig = {\n    basePath: options.router.basePath,\n    i18n: {\n      locales: options.router.locales\n    },\n    trailingSlash: Boolean(process.env.__NEXT_TRAILING_SLASH)\n  };\n  const rewriteHeader = response.headers.get('x-nextjs-rewrite');\n  let rewriteTarget = rewriteHeader || response.headers.get('x-nextjs-matched-path');\n  const matchedPath = response.headers.get('x-matched-path');\n  if (matchedPath && !rewriteTarget && !matchedPath.includes('__next_data_catchall') && !matchedPath.includes('/_error') && !matchedPath.includes('/404')) {\n    // leverage x-matched-path to detect next.config.js rewrites\n    rewriteTarget = matchedPath;\n  }\n  if (rewriteTarget) {\n    if (rewriteTarget.startsWith('/')) {\n      const parsedRewriteTarget = (0, _parseRelativeUrl).parseRelativeUrl(rewriteTarget);\n      const pathnameInfo = (0, _getNextPathnameInfo).getNextPathnameInfo(parsedRewriteTarget.pathname, {\n        nextConfig,\n        parseData: true\n      });\n      let fsPathname = (0, _removeTrailingSlash).removeTrailingSlash(pathnameInfo.pathname);\n      return Promise.all([options.router.pageLoader.getPageList(), (0, _routeLoader).getClientBuildManifest()]).then(([pages, {\n        __rewrites: rewrites\n      }]) => {\n        let as = (0, _addLocale).addLocale(pathnameInfo.pathname, pathnameInfo.locale);\n        if ((0, _isDynamic).isDynamicRoute(as) || !rewriteHeader && pages.includes((0, _normalizeLocalePath).normalizeLocalePath((0, _removeBasePath).removeBasePath(as), options.router.locales).pathname)) {\n          const parsedSource = (0, _getNextPathnameInfo).getNextPathnameInfo((0, _parseRelativeUrl).parseRelativeUrl(source).pathname, {\n            parseData: true\n          });\n          as = (0, _addBasePath).addBasePath(parsedSource.pathname);\n          parsedRewriteTarget.pathname = as;\n        }\n        if (process.env.__NEXT_HAS_REWRITES) {\n          const result = (0, _resolveRewrites).default(as, pages, rewrites, parsedRewriteTarget.query, path => resolveDynamicRoute(path, pages), options.router.locales);\n          if (result.matchedPage) {\n            parsedRewriteTarget.pathname = result.parsedAs.pathname;\n            as = parsedRewriteTarget.pathname;\n            Object.assign(parsedRewriteTarget.query, result.parsedAs.query);\n          }\n        } else if (!pages.includes(fsPathname)) {\n          const resolvedPathname = resolveDynamicRoute(fsPathname, pages);\n          if (resolvedPathname !== fsPathname) {\n            fsPathname = resolvedPathname;\n          }\n        }\n        const resolvedHref = !pages.includes(fsPathname) ? resolveDynamicRoute((0, _normalizeLocalePath).normalizeLocalePath((0, _removeBasePath).removeBasePath(parsedRewriteTarget.pathname), options.router.locales).pathname, pages) : fsPathname;\n        if ((0, _isDynamic).isDynamicRoute(resolvedHref)) {\n          const matches = (0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(resolvedHref))(as);\n          Object.assign(parsedRewriteTarget.query, matches || {});\n        }\n        return {\n          type: 'rewrite',\n          parsedAs: parsedRewriteTarget,\n          resolvedHref\n        };\n      });\n    }\n    const src = (0, _parsePath).parsePath(source);\n    const pathname = (0, _formatNextPathnameInfo).formatNextPathnameInfo(_extends({}, (0, _getNextPathnameInfo).getNextPathnameInfo(src.pathname, {\n      nextConfig,\n      parseData: true\n    }), {\n      defaultLocale: options.router.defaultLocale,\n      buildId: ''\n    }));\n    return Promise.resolve({\n      type: 'redirect-external',\n      destination: `${pathname}${src.query}${src.hash}`\n    });\n  }\n  const redirectTarget = response.headers.get('x-nextjs-redirect');\n  if (redirectTarget) {\n    if (redirectTarget.startsWith('/')) {\n      const src = (0, _parsePath).parsePath(redirectTarget);\n      const pathname = (0, _formatNextPathnameInfo).formatNextPathnameInfo(_extends({}, (0, _getNextPathnameInfo).getNextPathnameInfo(src.pathname, {\n        nextConfig,\n        parseData: true\n      }), {\n        defaultLocale: options.router.defaultLocale,\n        buildId: ''\n      }));\n      return Promise.resolve({\n        type: 'redirect-internal',\n        newAs: `${pathname}${src.query}${src.hash}`,\n        newUrl: `${pathname}${src.query}${src.hash}`\n      });\n    }\n    return Promise.resolve({\n      type: 'redirect-external',\n      destination: redirectTarget\n    });\n  }\n  return Promise.resolve({\n    type: 'next'\n  });\n}\nfunction withMiddlewareEffects(options) {\n  return _withMiddlewareEffects.apply(this, arguments);\n}\nfunction _withMiddlewareEffects() {\n  _withMiddlewareEffects = _async_to_generator(function* (options) {\n    const matches = yield matchesMiddleware(options);\n    if (!matches || !options.fetchData) {\n      return null;\n    }\n    try {\n      const data = yield options.fetchData();\n      const effect = yield getMiddlewareData(data.dataHref, data.response, options);\n      return {\n        dataHref: data.dataHref,\n        json: data.json,\n        response: data.response,\n        text: data.text,\n        cacheKey: data.cacheKey,\n        effect\n      };\n    } catch (e) {\n      /**\n      * TODO: Revisit this in the future.\n      * For now we will not consider middleware data errors to be fatal.\n      * maybe we should revisit in the future.\n      */\n      return null;\n    }\n  });\n  return _withMiddlewareEffects.apply(this, arguments);\n}\nconst manualScrollRestoration = process.env.__NEXT_SCROLL_RESTORATION && typeof window !== 'undefined' && 'scrollRestoration' in window.history && !!function () {\n  try {\n    let v = '__next';\n    // eslint-disable-next-line no-sequences\n    return sessionStorage.setItem(v, v), sessionStorage.removeItem(v), true;\n  } catch (n) {}\n}();\nconst SSG_DATA_NOT_FOUND = Symbol('SSG_DATA_NOT_FOUND');\nfunction fetchRetry(url, attempts, options) {\n  return fetch(url, {\n    // Cookies are required to be present for Next.js' SSG \"Preview Mode\".\n    // Cookies may also be required for `getServerSideProps`.\n    //\n    // > `fetch` won’t send cookies, unless you set the credentials init\n    // > option.\n    // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\n    //\n    // > For maximum browser compatibility when it comes to sending &\n    // > receiving cookies, always supply the `credentials: 'same-origin'`\n    // > option instead of relying on the default.\n    // https://github.com/github/fetch#caveats\n    credentials: 'same-origin',\n    method: options.method || 'GET',\n    headers: Object.assign({}, options.headers, {\n      'x-nextjs-data': '1'\n    })\n  }).then(response => {\n    return !response.ok && attempts > 1 && response.status >= 500 ? fetchRetry(url, attempts - 1, options) : response;\n  });\n}\nfunction handleSmoothScroll(fn) {\n  const htmlElement = document.documentElement;\n  const existing = htmlElement.style.scrollBehavior;\n  htmlElement.style.scrollBehavior = 'auto';\n  // In Chrome-based browsers we need to force reflow before calling `scrollTo`.\n  // Otherwise it will not pickup the change in scrollBehavior\n  // More info here: https://github.com/vercel/next.js/issues/40719#issuecomment-1336248042\n  htmlElement.getClientRects();\n  fn();\n  htmlElement.style.scrollBehavior = existing;\n}\nfunction tryToParseAsJSON(text) {\n  try {\n    return JSON.parse(text);\n  } catch (error) {\n    return null;\n  }\n}\nfunction fetchNextData({\n  dataHref,\n  inflightCache,\n  isPrefetch,\n  hasMiddleware,\n  isServerRender,\n  parseJSON,\n  persistCache,\n  isBackground,\n  unstable_skipClientCache\n}) {\n  const {\n    href: cacheKey\n  } = new URL(dataHref, window.location.href);\n  var ref1;\n  const getData = params => {\n    return fetchRetry(dataHref, isServerRender ? 3 : 1, {\n      headers: Object.assign({}, isPrefetch ? {\n        purpose: 'prefetch'\n      } : {}, isPrefetch && hasMiddleware ? {\n        'x-middleware-prefetch': '1'\n      } : {}),\n      method: (ref1 = params == null ? void 0 : params.method) != null ? ref1 : 'GET'\n    }).then(response => {\n      if (response.ok && (params == null ? void 0 : params.method) === 'HEAD') {\n        return {\n          dataHref,\n          response,\n          text: '',\n          json: {},\n          cacheKey\n        };\n      }\n      return response.text().then(text => {\n        if (!response.ok) {\n          /**\n          * When the data response is a redirect because of a middleware\n          * we do not consider it an error. The headers must bring the\n          * mapped location.\n          * TODO: Change the status code in the handler.\n          */\n          if (hasMiddleware && [301, 302, 307, 308].includes(response.status)) {\n            return {\n              dataHref,\n              response,\n              text,\n              json: {},\n              cacheKey\n            };\n          }\n          if (!hasMiddleware && response.status === 404) {\n            var ref;\n            if ((ref = tryToParseAsJSON(text)) == null ? void 0 : ref.notFound) {\n              return {\n                dataHref,\n                json: {\n                  notFound: SSG_DATA_NOT_FOUND\n                },\n                response,\n                text,\n                cacheKey\n              };\n            }\n          }\n          const error = new Error(`Failed to load static props`);\n          /**\n          * We should only trigger a server-side transition if this was\n          * caused on a client-side transition. Otherwise, we'd get into\n          * an infinite loop.\n          */\n          if (!isServerRender) {\n            (0, _routeLoader).markAssetError(error);\n          }\n          throw error;\n        }\n        return {\n          dataHref,\n          json: parseJSON ? tryToParseAsJSON(text) : null,\n          response,\n          text,\n          cacheKey\n        };\n      });\n    }).then(data => {\n      if (!persistCache || process.env.NODE_ENV !== 'production' || data.response.headers.get('x-middleware-cache') === 'no-cache') {\n        delete inflightCache[cacheKey];\n      }\n      return data;\n    }).catch(err => {\n      if (!unstable_skipClientCache) {\n        delete inflightCache[cacheKey];\n      }\n      if (err.message === 'Failed to fetch') {\n        (0, _routeLoader).markAssetError(err);\n      }\n      throw err;\n    });\n  };\n  // when skipping client cache we wait to update\n  // inflight cache until successful data response\n  // this allows racing click event with fetching newer data\n  // without blocking navigation when stale data is available\n  if (unstable_skipClientCache && persistCache) {\n    return getData({}).then(data => {\n      inflightCache[cacheKey] = Promise.resolve(data);\n      return data;\n    });\n  }\n  if (inflightCache[cacheKey] !== undefined) {\n    return inflightCache[cacheKey];\n  }\n  return inflightCache[cacheKey] = getData(isBackground ? {\n    method: 'HEAD'\n  } : {});\n}\nfunction createKey() {\n  return Math.random().toString(36).slice(2, 10);\n}\nfunction handleHardNavigation({\n  url,\n  router\n}) {\n  // ensure we don't trigger a hard navigation to the same\n  // URL as this can end up with an infinite refresh\n  if (url === (0, _addBasePath).addBasePath((0, _addLocale).addLocale(router.asPath, router.locale))) {\n    throw new Error(`Invariant: attempted to hard navigate to the same URL ${url} ${location.href}`);\n  }\n  window.location.href = url;\n}\nconst getCancelledHandler = ({\n  route,\n  router\n}) => {\n  let cancelled = false;\n  const cancel = router.clc = () => {\n    cancelled = true;\n  };\n  const handleCancelled = () => {\n    if (cancelled) {\n      const error = new Error(`Abort fetching component for route: \"${route}\"`);\n      error.cancelled = true;\n      throw error;\n    }\n    if (cancel === router.clc) {\n      router.clc = null;\n    }\n  };\n  return handleCancelled;\n};\nclass Router {\n  reload() {\n    window.location.reload();\n  }\n  /**\n  * Go back in history\n  */\n  back() {\n    window.history.back();\n  }\n  /**\n  * Go forward in history\n  */\n  forward() {\n    window.history.forward();\n  }\n  /**\n  * Performs a `pushState` with arguments\n  * @param url of the route\n  * @param as masks `url` for the browser\n  * @param options object you can define `shallow` and other options\n  */\n  push(url, as, options = {}) {\n    if (process.env.__NEXT_SCROLL_RESTORATION) {\n      // TODO: remove in the future when we update history before route change\n      // is complete, as the popstate event should handle this capture.\n      if (manualScrollRestoration) {\n        try {\n          // Snapshot scroll position right before navigating to a new page:\n          sessionStorage.setItem('__next_scroll_' + this._key, JSON.stringify({\n            x: self.pageXOffset,\n            y: self.pageYOffset\n          }));\n        } catch (e) {}\n      }\n    }\n    ({\n      url,\n      as\n    } = prepareUrlAs(this, url, as));\n    return this.change('pushState', url, as, options);\n  }\n  /**\n  * Performs a `replaceState` with arguments\n  * @param url of the route\n  * @param as masks `url` for the browser\n  * @param options object you can define `shallow` and other options\n  */\n  replace(url, as, options = {}) {\n    ({\n      url,\n      as\n    } = prepareUrlAs(this, url, as));\n    return this.change('replaceState', url, as, options);\n  }\n  change(method, url, as, options, forcedScroll) {\n    var _this = this;\n    return _async_to_generator(function* () {\n      if (!isLocalURL(url)) {\n        handleHardNavigation({\n          url,\n          router: _this\n        });\n        return false;\n      }\n      // WARNING: `_h` is an internal option for handing Next.js client-side\n      // hydration. Your app should _never_ use this property. It may change at\n      // any time without notice.\n      const isQueryUpdating = options._h === 1;\n      let shouldResolveHref = isQueryUpdating || options._shouldResolveHref || (0, _parsePath).parsePath(url).pathname === (0, _parsePath).parsePath(as).pathname;\n      const nextState = _extends({}, _this.state);\n      // for static pages with query params in the URL we delay\n      // marking the router ready until after the query is updated\n      // or a navigation has occurred\n      const readyStateChange = _this.isReady !== true;\n      _this.isReady = true;\n      const isSsr = _this.isSsr;\n      if (!isQueryUpdating) {\n        _this.isSsr = false;\n      }\n      // if a route transition is already in progress before\n      // the query updating is triggered ignore query updating\n      if (isQueryUpdating && _this.clc) {\n        return false;\n      }\n      const prevLocale = nextState.locale;\n      if (process.env.__NEXT_I18N_SUPPORT) {\n        nextState.locale = options.locale === false ? _this.defaultLocale : options.locale || nextState.locale;\n        if (typeof options.locale === 'undefined') {\n          options.locale = nextState.locale;\n        }\n        const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as);\n        const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, _this.locales);\n        if (localePathResult.detectedLocale) {\n          nextState.locale = localePathResult.detectedLocale;\n          parsedAs.pathname = (0, _addBasePath).addBasePath(parsedAs.pathname);\n          as = (0, _formatUrl).formatWithValidation(parsedAs);\n          url = (0, _addBasePath).addBasePath((0, _normalizeLocalePath).normalizeLocalePath((0, _hasBasePath).hasBasePath(url) ? (0, _removeBasePath).removeBasePath(url) : url, _this.locales).pathname);\n        }\n        let didNavigate = false;\n        // we need to wrap this in the env check again since regenerator runtime\n        // moves this on its own due to the return\n        if (process.env.__NEXT_I18N_SUPPORT) {\n          var ref;\n          // if the locale isn't configured hard navigate to show 404 page\n          if (!((ref = _this.locales) == null ? void 0 : ref.includes(nextState.locale))) {\n            parsedAs.pathname = (0, _addLocale).addLocale(parsedAs.pathname, nextState.locale);\n            handleHardNavigation({\n              url: (0, _formatUrl).formatWithValidation(parsedAs),\n              router: _this\n            });\n            // this was previously a return but was removed in favor\n            // of better dead code elimination with regenerator runtime\n            didNavigate = true;\n          }\n        }\n        const detectedDomain = (0, _detectDomainLocale).detectDomainLocale(_this.domainLocales, undefined, nextState.locale);\n        // we need to wrap this in the env check again since regenerator runtime\n        // moves this on its own due to the return\n        if (process.env.__NEXT_I18N_SUPPORT) {\n          // if we are navigating to a domain locale ensure we redirect to the\n          // correct domain\n          if (!didNavigate && detectedDomain && _this.isLocaleDomain && self.location.hostname !== detectedDomain.domain) {\n            const asNoBasePath = (0, _removeBasePath).removeBasePath(as);\n            handleHardNavigation({\n              url: `http${detectedDomain.http ? '' : 's'}://${detectedDomain.domain}${(0, _addBasePath).addBasePath(`${nextState.locale === detectedDomain.defaultLocale ? '' : `/${nextState.locale}`}${asNoBasePath === '/' ? '' : asNoBasePath}` || '/')}`,\n              router: _this\n            });\n            // this was previously a return but was removed in favor\n            // of better dead code elimination with regenerator runtime\n            didNavigate = true;\n          }\n        }\n        if (didNavigate) {\n          return new Promise(() => {});\n        }\n      }\n      // marking route changes as a navigation start entry\n      if (_utils.ST) {\n        performance.mark('routeChange');\n      }\n      const {\n        shallow = false,\n        scroll = true\n      } = options;\n      const routeProps = {\n        shallow\n      };\n      if (_this._inFlightRoute && _this.clc) {\n        if (!isSsr) {\n          Router.events.emit('routeChangeError', buildCancellationError(), _this._inFlightRoute, routeProps);\n        }\n        _this.clc();\n        _this.clc = null;\n      }\n      as = (0, _addBasePath).addBasePath((0, _addLocale).addLocale((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as, options.locale, _this.defaultLocale));\n      const cleanedAs = (0, _removeLocale).removeLocale((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as, nextState.locale);\n      _this._inFlightRoute = as;\n      const localeChange = prevLocale !== nextState.locale;\n      // If the url change is only related to a hash change\n      // We should not proceed. We should only change the state.\n      if (!isQueryUpdating && _this.onlyAHashChange(cleanedAs) && !localeChange) {\n        nextState.asPath = cleanedAs;\n        Router.events.emit('hashChangeStart', as, routeProps);\n        // TODO: do we need the resolved href when only a hash change?\n        _this.changeState(method, url, as, _extends({}, options, {\n          scroll: false\n        }));\n        if (scroll) {\n          _this.scrollToHash(cleanedAs);\n        }\n        try {\n          yield _this.set(nextState, _this.components[nextState.route], null);\n        } catch (err) {\n          if ((0, _isError).default(err) && err.cancelled) {\n            Router.events.emit('routeChangeError', err, cleanedAs, routeProps);\n          }\n          throw err;\n        }\n        Router.events.emit('hashChangeComplete', as, routeProps);\n        return true;\n      }\n      let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      let {\n        pathname,\n        query\n      } = parsed;\n      // The build manifest needs to be loaded before auto-static dynamic pages\n      // get their query parameters to allow ensuring they can be parsed properly\n      // when rewritten to\n      let pages, rewrites;\n      try {\n        [pages, {\n          __rewrites: rewrites\n        }] = yield Promise.all([_this.pageLoader.getPageList(), (0, _routeLoader).getClientBuildManifest(), _this.pageLoader.getMiddleware()]);\n      } catch (err) {\n        // If we fail to resolve the page list or client-build manifest, we must\n        // do a server-side transition:\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        return false;\n      }\n      // If asked to change the current URL we should reload the current page\n      // (not location.reload() but reload getInitialProps and other Next.js stuffs)\n      // We also need to set the method = replaceState always\n      // as this should not go into the history (That's how browsers work)\n      // We should compare the new asPath to the current asPath, not the url\n      if (!_this.urlIsNew(cleanedAs) && !localeChange) {\n        method = 'replaceState';\n      }\n      // we need to resolve the as value using rewrites for dynamic SSG\n      // pages to allow building the data URL correctly\n      let resolvedAs = as;\n      // url and as should always be prefixed with basePath by this\n      // point by either next/link or router.push/replace so strip the\n      // basePath from the pathname to match the pages dir 1-to-1\n      pathname = pathname ? (0, _removeTrailingSlash).removeTrailingSlash((0, _removeBasePath).removeBasePath(pathname)) : pathname;\n      let route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      const parsedAsPathname = as.startsWith('/') && (0, _parseRelativeUrl).parseRelativeUrl(as).pathname;\n      const isMiddlewareRewrite = !!(parsedAsPathname && route !== parsedAsPathname && (!(0, _isDynamic).isDynamicRoute(route) || !(0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(route))(parsedAsPathname)));\n      // we don't attempt resolve asPath when we need to execute\n      // middleware as the resolving will occur server-side\n      const isMiddlewareMatch = !options.shallow && (yield matchesMiddleware({\n        asPath: as,\n        locale: nextState.locale,\n        router: _this\n      }));\n      if (isQueryUpdating && isMiddlewareMatch) {\n        shouldResolveHref = false;\n      }\n      if (shouldResolveHref && pathname !== '/_error') {\n        options._shouldResolveHref = true;\n        if (process.env.__NEXT_HAS_REWRITES && as.startsWith('/')) {\n          const rewritesResult = (0, _resolveRewrites).default((0, _addBasePath).addBasePath((0, _addLocale).addLocale(cleanedAs, nextState.locale), true), pages, rewrites, query, p => resolveDynamicRoute(p, pages), _this.locales);\n          if (rewritesResult.externalDest) {\n            handleHardNavigation({\n              url: as,\n              router: _this\n            });\n            return true;\n          }\n          if (!isMiddlewareMatch) {\n            resolvedAs = rewritesResult.asPath;\n          }\n          if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n            // if this directly matches a page we need to update the href to\n            // allow the correct page chunk to be loaded\n            pathname = rewritesResult.resolvedHref;\n            parsed.pathname = (0, _addBasePath).addBasePath(pathname);\n            if (!isMiddlewareMatch) {\n              url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n          }\n        } else {\n          parsed.pathname = resolveDynamicRoute(pathname, pages);\n          if (parsed.pathname !== pathname) {\n            pathname = parsed.pathname;\n            parsed.pathname = (0, _addBasePath).addBasePath(pathname);\n            if (!isMiddlewareMatch) {\n              url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n          }\n        }\n      }\n      if (!isLocalURL(as)) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(`Invalid href: \"${url}\" and as: \"${as}\", received relative href and external as` + `\\nSee more info: https://nextjs.org/docs/messages/invalid-relative-url-external-as`);\n        }\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        return false;\n      }\n      resolvedAs = (0, _removeLocale).removeLocale((0, _removeBasePath).removeBasePath(resolvedAs), nextState.locale);\n      route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      let routeMatch = false;\n      if ((0, _isDynamic).isDynamicRoute(route)) {\n        const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(resolvedAs);\n        const asPathname = parsedAs.pathname;\n        const routeRegex = (0, _routeRegex).getRouteRegex(route);\n        routeMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(asPathname);\n        const shouldInterpolate = route === asPathname;\n        const interpolatedAs = shouldInterpolate ? interpolateAs(route, asPathname, query) : {};\n        if (!routeMatch || shouldInterpolate && !interpolatedAs.result) {\n          const missingParams = Object.keys(routeRegex.groups).filter(param => !query[param] && !routeRegex.groups[param].optional);\n          if (missingParams.length > 0 && !isMiddlewareMatch) {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(`${shouldInterpolate ? `Interpolating href` : `Mismatching \\`as\\` and \\`href\\``} failed to manually provide ` + `the params: ${missingParams.join(', ')} in the \\`href\\`'s \\`query\\``);\n            }\n            throw new Error((shouldInterpolate ? `The provided \\`href\\` (${url}) value is missing query values (${missingParams.join(', ')}) to be interpolated properly. ` : `The provided \\`as\\` value (${asPathname}) is incompatible with the \\`href\\` value (${route}). `) + `Read more: https://nextjs.org/docs/messages/${shouldInterpolate ? 'href-interpolation-failed' : 'incompatible-href-as'}`);\n          }\n        } else if (shouldInterpolate) {\n          as = (0, _formatUrl).formatWithValidation(Object.assign({}, parsedAs, {\n            pathname: interpolatedAs.result,\n            query: omit(query, interpolatedAs.params)\n          }));\n        } else {\n          // Merge params into `query`, overwriting any specified in search\n          Object.assign(query, routeMatch);\n        }\n      }\n      if (!isQueryUpdating) {\n        Router.events.emit('routeChangeStart', as, routeProps);\n      }\n      try {\n        var ref2, ref3, ref4;\n        let routeInfo = yield _this.getRouteInfo({\n          route,\n          pathname,\n          query,\n          as,\n          resolvedAs,\n          routeProps,\n          locale: nextState.locale,\n          isPreview: nextState.isPreview,\n          hasMiddleware: isMiddlewareMatch,\n          unstable_skipClientCache: options.unstable_skipClientCache,\n          isQueryUpdating: isQueryUpdating && !_this.isFallback,\n          isMiddlewareRewrite\n        });\n        if ('route' in routeInfo && isMiddlewareMatch) {\n          pathname = routeInfo.route || route;\n          route = pathname;\n          if (!routeProps.shallow) {\n            query = Object.assign({}, routeInfo.query || {}, query);\n          }\n          const cleanedParsedPathname = (0, _hasBasePath).hasBasePath(parsed.pathname) ? (0, _removeBasePath).removeBasePath(parsed.pathname) : parsed.pathname;\n          if (routeMatch && pathname !== cleanedParsedPathname) {\n            Object.keys(routeMatch).forEach(key => {\n              if (routeMatch && query[key] === routeMatch[key]) {\n                delete query[key];\n              }\n            });\n          }\n          if ((0, _isDynamic).isDynamicRoute(pathname)) {\n            const prefixedAs = !routeProps.shallow && routeInfo.resolvedAs ? routeInfo.resolvedAs : (0, _addBasePath).addBasePath((0, _addLocale).addLocale(new URL(as, location.href).pathname, nextState.locale), true);\n            let rewriteAs = prefixedAs;\n            if ((0, _hasBasePath).hasBasePath(rewriteAs)) {\n              rewriteAs = (0, _removeBasePath).removeBasePath(rewriteAs);\n            }\n            if (process.env.__NEXT_I18N_SUPPORT) {\n              const localeResult = (0, _normalizeLocalePath).normalizeLocalePath(rewriteAs, _this.locales);\n              nextState.locale = localeResult.detectedLocale || nextState.locale;\n              rewriteAs = localeResult.pathname;\n            }\n            const routeRegex = (0, _routeRegex).getRouteRegex(pathname);\n            const curRouteMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(new URL(rewriteAs, location.href).pathname);\n            if (curRouteMatch) {\n              Object.assign(query, curRouteMatch);\n            }\n          }\n        }\n        // If the routeInfo brings a redirect we simply apply it.\n        if ('type' in routeInfo) {\n          if (routeInfo.type === 'redirect-internal') {\n            return _this.change(method, routeInfo.newUrl, routeInfo.newAs, options);\n          } else {\n            handleHardNavigation({\n              url: routeInfo.destination,\n              router: _this\n            });\n            return new Promise(() => {});\n          }\n        }\n        const component = routeInfo.Component;\n        if (component && component.unstable_scriptLoader) {\n          const scripts = [].concat(component.unstable_scriptLoader());\n          scripts.forEach(script => {\n            (0, _script).handleClientScriptLoad(script.props);\n          });\n        }\n        // handle redirect on client-transition\n        if ((routeInfo.__N_SSG || routeInfo.__N_SSP) && routeInfo.props) {\n          if (routeInfo.props.pageProps && routeInfo.props.pageProps.__N_REDIRECT) {\n            // Use the destination from redirect without adding locale\n            options.locale = false;\n            const destination = routeInfo.props.pageProps.__N_REDIRECT;\n            // check if destination is internal (resolves to a page) and attempt\n            // client-navigation if it is falling back to hard navigation if\n            // it's not\n            if (destination.startsWith('/') && routeInfo.props.pageProps.__N_REDIRECT_BASE_PATH !== false) {\n              const parsedHref = (0, _parseRelativeUrl).parseRelativeUrl(destination);\n              parsedHref.pathname = resolveDynamicRoute(parsedHref.pathname, pages);\n              const {\n                url: newUrl,\n                as: newAs\n              } = prepareUrlAs(_this, destination, destination);\n              return _this.change(method, newUrl, newAs, options);\n            }\n            handleHardNavigation({\n              url: destination,\n              router: _this\n            });\n            return new Promise(() => {});\n          }\n          nextState.isPreview = !!routeInfo.props.__N_PREVIEW;\n          // handle SSG data 404\n          if (routeInfo.props.notFound === SSG_DATA_NOT_FOUND) {\n            let notFoundRoute;\n            try {\n              yield _this.fetchComponent('/404');\n              notFoundRoute = '/404';\n            } catch (_) {\n              notFoundRoute = '/_error';\n            }\n            routeInfo = yield _this.getRouteInfo({\n              route: notFoundRoute,\n              pathname: notFoundRoute,\n              query,\n              as,\n              resolvedAs,\n              routeProps: {\n                shallow: false\n              },\n              locale: nextState.locale,\n              isPreview: nextState.isPreview\n            });\n            if ('type' in routeInfo) {\n              throw new Error(`Unexpected middleware effect on /404`);\n            }\n          }\n        }\n        if (isQueryUpdating && _this.pathname === '/_error' && ((ref2 = self.__NEXT_DATA__.props) == null ? void 0 : (ref3 = ref2.pageProps) == null ? void 0 : ref3.statusCode) === 500 && ((ref4 = routeInfo.props) == null ? void 0 : ref4.pageProps)) {\n          // ensure statusCode is still correct for static 500 page\n          // when updating query information\n          routeInfo.props.pageProps.statusCode = 500;\n        }\n        var _route;\n        // shallow routing is only allowed for same page URL changes.\n        const isValidShallowRoute = options.shallow && nextState.route === ((_route = routeInfo.route) != null ? _route : route);\n        var _scroll;\n        const shouldScroll = (_scroll = options.scroll) != null ? _scroll : !isQueryUpdating && !isValidShallowRoute;\n        const resetScroll = shouldScroll ? {\n          x: 0,\n          y: 0\n        } : null;\n        const upcomingScrollState = forcedScroll != null ? forcedScroll : resetScroll;\n        // the new state that the router gonna set\n        const upcomingRouterState = _extends({}, nextState, {\n          route,\n          pathname,\n          query,\n          asPath: cleanedAs,\n          isFallback: false\n        });\n        // When the page being rendered is the 404 page, we should only update the\n        // query parameters. Route changes here might add the basePath when it\n        // wasn't originally present. This is also why this block is before the\n        // below `changeState` call which updates the browser's history (changing\n        // the URL).\n        if (isQueryUpdating && (_this.pathname === '/404' || _this.pathname === '/_error')) {\n          var ref5, ref6, ref7;\n          routeInfo = yield _this.getRouteInfo({\n            route: _this.pathname,\n            pathname: _this.pathname,\n            query,\n            as,\n            resolvedAs,\n            routeProps: {\n              shallow: false\n            },\n            locale: nextState.locale,\n            isPreview: nextState.isPreview\n          });\n          if ('type' in routeInfo) {\n            throw new Error(`Unexpected middleware effect on ${_this.pathname}`);\n          }\n          if (_this.pathname === '/_error' && ((ref5 = self.__NEXT_DATA__.props) == null ? void 0 : (ref6 = ref5.pageProps) == null ? void 0 : ref6.statusCode) === 500 && ((ref7 = routeInfo.props) == null ? void 0 : ref7.pageProps)) {\n            // ensure statusCode is still correct for static 500 page\n            // when updating query information\n            routeInfo.props.pageProps.statusCode = 500;\n          }\n          try {\n            yield _this.set(upcomingRouterState, routeInfo, upcomingScrollState);\n          } catch (err) {\n            if ((0, _isError).default(err) && err.cancelled) {\n              Router.events.emit('routeChangeError', err, cleanedAs, routeProps);\n            }\n            throw err;\n          }\n          return true;\n        }\n        Router.events.emit('beforeHistoryChange', as, routeProps);\n        _this.changeState(method, url, as, options);\n        // for query updates we can skip it if the state is unchanged and we don't\n        // need to scroll\n        // https://github.com/vercel/next.js/issues/37139\n        const canSkipUpdating = isQueryUpdating && !upcomingScrollState && !readyStateChange && !localeChange && (0, _compareStates).compareRouterStates(upcomingRouterState, _this.state);\n        if (!canSkipUpdating) {\n          try {\n            yield _this.set(upcomingRouterState, routeInfo, upcomingScrollState);\n          } catch (e) {\n            if (e.cancelled) routeInfo.error = routeInfo.error || e;else throw e;\n          }\n          if (routeInfo.error) {\n            if (!isQueryUpdating) {\n              Router.events.emit('routeChangeError', routeInfo.error, cleanedAs, routeProps);\n            }\n            throw routeInfo.error;\n          }\n          if (process.env.__NEXT_I18N_SUPPORT) {\n            if (nextState.locale) {\n              document.documentElement.lang = nextState.locale;\n            }\n          }\n          if (!isQueryUpdating) {\n            Router.events.emit('routeChangeComplete', as, routeProps);\n          }\n          // A hash mark # is the optional last part of a URL\n          const hashRegex = /#.+$/;\n          if (shouldScroll && hashRegex.test(as)) {\n            _this.scrollToHash(as);\n          }\n        }\n        return true;\n      } catch (err1) {\n        if ((0, _isError).default(err1) && err1.cancelled) {\n          return false;\n        }\n        throw err1;\n      }\n    })();\n  }\n  changeState(method, url, as, options = {}) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof window.history === 'undefined') {\n        console.error(`Warning: window.history is not available.`);\n        return;\n      }\n      if (typeof window.history[method] === 'undefined') {\n        console.error(`Warning: window.history.${method} is not available`);\n        return;\n      }\n    }\n    if (method !== 'pushState' || (0, _utils).getURL() !== as) {\n      this._shallow = options.shallow;\n      window.history[method]({\n        url,\n        as,\n        options,\n        __N: true,\n        key: this._key = method !== 'pushState' ? this._key : createKey()\n      },\n      // Most browsers currently ignores this parameter, although they may use it in the future.\n      // Passing the empty string here should be safe against future changes to the method.\n      // https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState\n      '', as);\n    }\n  }\n  handleRouteInfoError(err, pathname, query, as, routeProps, loadErrorFail) {\n    var _this = this;\n    return _async_to_generator(function* () {\n      console.error(err);\n      if (err.cancelled) {\n        // bubble up cancellation errors\n        throw err;\n      }\n      if ((0, _routeLoader).isAssetError(err) || loadErrorFail) {\n        Router.events.emit('routeChangeError', err, as, routeProps);\n        // If we can't load the page it could be one of following reasons\n        //  1. Page doesn't exists\n        //  2. Page does exist in a different zone\n        //  3. Internal error while loading the page\n        // So, doing a hard reload is the proper way to deal with this.\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        // Changing the URL doesn't block executing the current code path.\n        // So let's throw a cancellation error stop the routing logic.\n        throw buildCancellationError();\n      }\n      try {\n        let props;\n        const {\n          page: Component,\n          styleSheets\n        } = yield _this.fetchComponent('/_error');\n        const routeInfo = {\n          props,\n          Component,\n          styleSheets,\n          err,\n          error: err\n        };\n        if (!routeInfo.props) {\n          try {\n            routeInfo.props = yield _this.getInitialProps(Component, {\n              err,\n              pathname,\n              query\n            });\n          } catch (gipErr) {\n            console.error('Error in error page `getInitialProps`: ', gipErr);\n            routeInfo.props = {};\n          }\n        }\n        return routeInfo;\n      } catch (routeInfoErr) {\n        return _this.handleRouteInfoError((0, _isError).default(routeInfoErr) ? routeInfoErr : new Error(routeInfoErr + ''), pathname, query, as, routeProps, true);\n      }\n    })();\n  }\n  getRouteInfo({\n    route: requestedRoute,\n    pathname,\n    query,\n    as,\n    resolvedAs,\n    routeProps,\n    locale,\n    hasMiddleware,\n    isPreview,\n    unstable_skipClientCache,\n    isQueryUpdating,\n    isMiddlewareRewrite\n  }) {\n    var _this = this;\n    return _async_to_generator(function* () {\n      /**\n      * This `route` binding can change if there's a rewrite\n      * so we keep a reference to the original requested route\n      * so we can store the cache for it and avoid re-requesting every time\n      * for shallow routing purposes.\n      */\n      let route = requestedRoute;\n      try {\n        var ref, ref8, ref9, ref10;\n        const handleCancelled = getCancelledHandler({\n          route,\n          router: _this\n        });\n        let existingInfo = _this.components[route];\n        if (routeProps.shallow && existingInfo && _this.route === route) {\n          return existingInfo;\n        }\n        if (hasMiddleware) {\n          existingInfo = undefined;\n        }\n        let cachedRouteInfo = existingInfo && !('initial' in existingInfo) && process.env.NODE_ENV !== 'development' ? existingInfo : undefined;\n        const isBackground = isQueryUpdating;\n        const fetchNextDataParams = {\n          dataHref: _this.pageLoader.getDataHref({\n            href: (0, _formatUrl).formatWithValidation({\n              pathname,\n              query\n            }),\n            skipInterpolation: true,\n            asPath: resolvedAs,\n            locale\n          }),\n          hasMiddleware: true,\n          isServerRender: _this.isSsr,\n          parseJSON: true,\n          inflightCache: isBackground ? _this.sbc : _this.sdc,\n          persistCache: !isPreview,\n          isPrefetch: false,\n          unstable_skipClientCache,\n          isBackground\n        };\n        let data = isQueryUpdating && !isMiddlewareRewrite ? null : yield withMiddlewareEffects({\n          fetchData: () => fetchNextData(fetchNextDataParams),\n          asPath: resolvedAs,\n          locale: locale,\n          router: _this\n        }).catch(err => {\n          // we don't hard error during query updating\n          // as it's un-necessary and doesn't need to be fatal\n          // unless it is a fallback route and the props can't\n          // be loaded\n          if (isQueryUpdating) {\n            return null;\n          }\n          throw err;\n        });\n        if (isQueryUpdating) {\n          if (!data) {\n            data = {\n              json: self.__NEXT_DATA__.props\n            };\n          } else {\n            data.json = self.__NEXT_DATA__.props;\n          }\n        }\n        handleCancelled();\n        if ((data == null ? void 0 : (ref = data.effect) == null ? void 0 : ref.type) === 'redirect-internal' || (data == null ? void 0 : (ref8 = data.effect) == null ? void 0 : ref8.type) === 'redirect-external') {\n          return data.effect;\n        }\n        if ((data == null ? void 0 : (ref9 = data.effect) == null ? void 0 : ref9.type) === 'rewrite') {\n          const resolvedRoute = (0, _removeTrailingSlash).removeTrailingSlash(data.effect.resolvedHref);\n          const pages = yield _this.pageLoader.getPageList();\n          // during query updating the page must match although during\n          // client-transition a redirect that doesn't match a page\n          // can be returned and this should trigger a hard navigation\n          // which is valid for incremental migration\n          if (!isQueryUpdating || pages.includes(resolvedRoute)) {\n            route = resolvedRoute;\n            pathname = data.effect.resolvedHref;\n            query = _extends({}, query, data.effect.parsedAs.query);\n            resolvedAs = (0, _removeBasePath).removeBasePath((0, _normalizeLocalePath).normalizeLocalePath(data.effect.parsedAs.pathname, _this.locales).pathname);\n            // Check again the cache with the new destination.\n            existingInfo = _this.components[route];\n            if (routeProps.shallow && existingInfo && _this.route === route && !hasMiddleware) {\n              // If we have a match with the current route due to rewrite,\n              // we can copy the existing information to the rewritten one.\n              // Then, we return the information along with the matched route.\n              return _extends({}, existingInfo, {\n                route\n              });\n            }\n          }\n        }\n        if ((0, _isApiRoute).isAPIRoute(route)) {\n          handleHardNavigation({\n            url: as,\n            router: _this\n          });\n          return new Promise(() => {});\n        }\n        const routeInfo = cachedRouteInfo || (yield _this.fetchComponent(route).then(res => ({\n          Component: res.page,\n          styleSheets: res.styleSheets,\n          __N_SSG: res.mod.__N_SSG,\n          __N_SSP: res.mod.__N_SSP\n        })));\n        if (process.env.NODE_ENV !== 'production') {\n          const {\n            isValidElementType\n          } = require('next/dist/compiled/react-is');\n          if (!isValidElementType(routeInfo.Component)) {\n            throw new Error(`The default export is not a React Component in page: \"${pathname}\"`);\n          }\n        }\n        const wasBailedPrefetch = data == null ? void 0 : (ref10 = data.response) == null ? void 0 : ref10.headers.get('x-middleware-skip');\n        const shouldFetchData = routeInfo.__N_SSG || routeInfo.__N_SSP;\n        // For non-SSG prefetches that bailed before sending data\n        // we clear the cache to fetch full response\n        if (wasBailedPrefetch && (data == null ? void 0 : data.dataHref)) {\n          delete _this.sdc[data.dataHref];\n        }\n        const {\n          props,\n          cacheKey\n        } = yield _this._getData(_async_to_generator(function* () {\n          if (shouldFetchData) {\n            if ((data == null ? void 0 : data.json) && !wasBailedPrefetch) {\n              return {\n                cacheKey: data.cacheKey,\n                props: data.json\n              };\n            }\n            const dataHref = (data == null ? void 0 : data.dataHref) ? data.dataHref : _this.pageLoader.getDataHref({\n              href: (0, _formatUrl).formatWithValidation({\n                pathname,\n                query\n              }),\n              asPath: resolvedAs,\n              locale\n            });\n            const fetched = yield fetchNextData({\n              dataHref,\n              isServerRender: _this.isSsr,\n              parseJSON: true,\n              inflightCache: wasBailedPrefetch ? {} : _this.sdc,\n              persistCache: !isPreview,\n              isPrefetch: false,\n              unstable_skipClientCache\n            });\n            return {\n              cacheKey: fetched.cacheKey,\n              props: fetched.json || {}\n            };\n          }\n          return {\n            headers: {},\n            props: yield _this.getInitialProps(routeInfo.Component,\n            // we provide AppTree later so this needs to be `any`\n            {\n              pathname,\n              query,\n              asPath: as,\n              locale,\n              locales: _this.locales,\n              defaultLocale: _this.defaultLocale\n            })\n          };\n        }));\n        // Only bust the data cache for SSP routes although\n        // middleware can skip cache per request with\n        // x-middleware-cache: no-cache as well\n        if (routeInfo.__N_SSP && fetchNextDataParams.dataHref && cacheKey) {\n          delete _this.sdc[cacheKey];\n        }\n        // we kick off a HEAD request in the background\n        // when a non-prefetch request is made to signal revalidation\n        if (!_this.isPreview && routeInfo.__N_SSG && process.env.NODE_ENV !== 'development' && !isQueryUpdating) {\n          fetchNextData(Object.assign({}, fetchNextDataParams, {\n            isBackground: true,\n            persistCache: false,\n            inflightCache: _this.sbc\n          })).catch(() => {});\n        }\n        props.pageProps = Object.assign({}, props.pageProps);\n        routeInfo.props = props;\n        routeInfo.route = route;\n        routeInfo.query = query;\n        routeInfo.resolvedAs = resolvedAs;\n        _this.components[route] = routeInfo;\n        return routeInfo;\n      } catch (err) {\n        return _this.handleRouteInfoError((0, _isError).getProperError(err), pathname, query, as, routeProps);\n      }\n    })();\n  }\n  set(state, data, resetScroll) {\n    this.state = state;\n    return this.sub(data, this.components['/_app'].Component, resetScroll);\n  }\n  /**\n  * Callback to execute before replacing router state\n  * @param cb callback to be executed\n  */\n  beforePopState(cb) {\n    this._bps = cb;\n  }\n  onlyAHashChange(as) {\n    if (!this.asPath) return false;\n    const [oldUrlNoHash, oldHash] = this.asPath.split('#');\n    const [newUrlNoHash, newHash] = as.split('#');\n    // Makes sure we scroll to the provided hash if the url/hash are the same\n    if (newHash && oldUrlNoHash === newUrlNoHash && oldHash === newHash) {\n      return true;\n    }\n    // If the urls are change, there's more than a hash change\n    if (oldUrlNoHash !== newUrlNoHash) {\n      return false;\n    }\n    // If the hash has changed, then it's a hash only change.\n    // This check is necessary to handle both the enter and\n    // leave hash === '' cases. The identity case falls through\n    // and is treated as a next reload.\n    return oldHash !== newHash;\n  }\n  scrollToHash(as) {\n    const [, hash = ''] = as.split('#');\n    // Scroll to top if the hash is just `#` with no value or `#top`\n    // To mirror browsers\n    if (hash === '' || hash === 'top') {\n      handleSmoothScroll(() => window.scrollTo(0, 0));\n      return;\n    }\n    // Decode hash to make non-latin anchor works.\n    const rawHash = decodeURIComponent(hash);\n    // First we check if the element by id is found\n    const idEl = document.getElementById(rawHash);\n    if (idEl) {\n      handleSmoothScroll(() => idEl.scrollIntoView());\n      return;\n    }\n    // If there's no element with the id, we check the `name` property\n    // To mirror browsers\n    const nameEl = document.getElementsByName(rawHash)[0];\n    if (nameEl) {\n      handleSmoothScroll(() => nameEl.scrollIntoView());\n    }\n  }\n  urlIsNew(asPath) {\n    return this.asPath !== asPath;\n  }\n  /**\n  * Prefetch page code, you may wait for the data during page rendering.\n  * This feature only works in production!\n  * @param url the href of prefetched page\n  * @param asPath the as path of the prefetched page\n  */\n  prefetch(url, asPath = url, options = {}) {\n    var _this = this;\n    return _async_to_generator(function* () {\n      // Prefetch is not supported in development mode because it would trigger on-demand-entries\n      if (process.env.NODE_ENV !== 'production') {\n        return;\n      }\n      if (typeof window !== 'undefined' && (0, _isBot).isBot(window.navigator.userAgent)) {\n        // No prefetches for bots that render the link since they are typically navigating\n        // links via the equivalent of a hard navigation and hence never utilize these\n        // prefetches.\n        return;\n      }\n      let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      let {\n        pathname,\n        query\n      } = parsed;\n      const originalPathname = pathname;\n      if (process.env.__NEXT_I18N_SUPPORT) {\n        if (options.locale === false) {\n          pathname = (0, _normalizeLocalePath).normalizeLocalePath(pathname, _this.locales).pathname;\n          parsed.pathname = pathname;\n          url = (0, _formatUrl).formatWithValidation(parsed);\n          let parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(asPath);\n          const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, _this.locales);\n          parsedAs.pathname = localePathResult.pathname;\n          options.locale = localePathResult.detectedLocale || _this.defaultLocale;\n          asPath = (0, _formatUrl).formatWithValidation(parsedAs);\n        }\n      }\n      const pages = yield _this.pageLoader.getPageList();\n      let resolvedAs = asPath;\n      const locale = typeof options.locale !== 'undefined' ? options.locale || undefined : _this.locale;\n      const isMiddlewareMatch = yield matchesMiddleware({\n        asPath: asPath,\n        locale: locale,\n        router: _this\n      });\n      if (process.env.__NEXT_HAS_REWRITES && asPath.startsWith('/')) {\n        let rewrites;\n        ({\n          __rewrites: rewrites\n        } = yield (0, _routeLoader).getClientBuildManifest());\n        const rewritesResult = (0, _resolveRewrites).default((0, _addBasePath).addBasePath((0, _addLocale).addLocale(asPath, _this.locale), true), pages, rewrites, parsed.query, p => resolveDynamicRoute(p, pages), _this.locales);\n        if (rewritesResult.externalDest) {\n          return;\n        }\n        if (!isMiddlewareMatch) {\n          resolvedAs = (0, _removeLocale).removeLocale((0, _removeBasePath).removeBasePath(rewritesResult.asPath), _this.locale);\n        }\n        if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n          // if this directly matches a page we need to update the href to\n          // allow the correct page chunk to be loaded\n          pathname = rewritesResult.resolvedHref;\n          parsed.pathname = pathname;\n          if (!isMiddlewareMatch) {\n            url = (0, _formatUrl).formatWithValidation(parsed);\n          }\n        }\n      }\n      parsed.pathname = resolveDynamicRoute(parsed.pathname, pages);\n      if ((0, _isDynamic).isDynamicRoute(parsed.pathname)) {\n        pathname = parsed.pathname;\n        parsed.pathname = pathname;\n        Object.assign(query, (0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(parsed.pathname))((0, _parsePath).parsePath(asPath).pathname) || {});\n        if (!isMiddlewareMatch) {\n          url = (0, _formatUrl).formatWithValidation(parsed);\n        }\n      }\n      const data = process.env.__NEXT_MIDDLEWARE_PREFETCH === 'strict' ? null : yield withMiddlewareEffects({\n        fetchData: () => fetchNextData({\n          dataHref: _this.pageLoader.getDataHref({\n            href: (0, _formatUrl).formatWithValidation({\n              pathname: originalPathname,\n              query\n            }),\n            skipInterpolation: true,\n            asPath: resolvedAs,\n            locale\n          }),\n          hasMiddleware: true,\n          isServerRender: _this.isSsr,\n          parseJSON: true,\n          inflightCache: _this.sdc,\n          persistCache: !_this.isPreview,\n          isPrefetch: true\n        }),\n        asPath: asPath,\n        locale: locale,\n        router: _this\n      });\n      /**\n      * If there was a rewrite we apply the effects of the rewrite on the\n      * current parameters for the prefetch.\n      */\n      if ((data == null ? void 0 : data.effect.type) === 'rewrite') {\n        parsed.pathname = data.effect.resolvedHref;\n        pathname = data.effect.resolvedHref;\n        query = _extends({}, query, data.effect.parsedAs.query);\n        resolvedAs = data.effect.parsedAs.pathname;\n        url = (0, _formatUrl).formatWithValidation(parsed);\n      }\n      /**\n      * If there is a redirect to an external destination then we don't have\n      * to prefetch content as it will be unused.\n      */\n      if ((data == null ? void 0 : data.effect.type) === 'redirect-external') {\n        return;\n      }\n      const route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      yield Promise.all([_this.pageLoader._isSsg(route).then(isSsg => {\n        return isSsg ? fetchNextData({\n          dataHref: (data == null ? void 0 : data.json) ? data == null ? void 0 : data.dataHref : _this.pageLoader.getDataHref({\n            href: url,\n            asPath: resolvedAs,\n            locale: locale\n          }),\n          isServerRender: false,\n          parseJSON: true,\n          inflightCache: _this.sdc,\n          persistCache: !_this.isPreview,\n          isPrefetch: true,\n          unstable_skipClientCache: options.unstable_skipClientCache || options.priority && !!process.env.__NEXT_OPTIMISTIC_CLIENT_CACHE\n        }).then(() => false) : false;\n      }), _this.pageLoader[options.priority ? 'loadPage' : 'prefetch'](route)]);\n    })();\n  }\n  fetchComponent(route) {\n    var _this = this;\n    return _async_to_generator(function* () {\n      const handleCancelled = getCancelledHandler({\n        route,\n        router: _this\n      });\n      try {\n        const componentResult = yield _this.pageLoader.loadPage(route);\n        handleCancelled();\n        return componentResult;\n      } catch (err) {\n        handleCancelled();\n        throw err;\n      }\n    })();\n  }\n  _getData(fn) {\n    let cancelled = false;\n    const cancel = () => {\n      cancelled = true;\n    };\n    this.clc = cancel;\n    return fn().then(data => {\n      if (cancel === this.clc) {\n        this.clc = null;\n      }\n      if (cancelled) {\n        const err = new Error('Loading initial props cancelled');\n        err.cancelled = true;\n        throw err;\n      }\n      return data;\n    });\n  }\n  _getFlightData(dataHref) {\n    // Do not cache RSC flight response since it's not a static resource\n    return fetchNextData({\n      dataHref,\n      isServerRender: true,\n      parseJSON: false,\n      inflightCache: this.sdc,\n      persistCache: false,\n      isPrefetch: false\n    }).then(({\n      text\n    }) => ({\n      data: text\n    }));\n  }\n  getInitialProps(Component, ctx) {\n    const {\n      Component: App\n    } = this.components['/_app'];\n    const AppTree = this._wrapApp(App);\n    ctx.AppTree = AppTree;\n    return (0, _utils).loadGetInitialProps(App, {\n      AppTree,\n      Component,\n      router: this,\n      ctx\n    });\n  }\n  get route() {\n    return this.state.route;\n  }\n  get pathname() {\n    return this.state.pathname;\n  }\n  get query() {\n    return this.state.query;\n  }\n  get asPath() {\n    return this.state.asPath;\n  }\n  get locale() {\n    return this.state.locale;\n  }\n  get isFallback() {\n    return this.state.isFallback;\n  }\n  get isPreview() {\n    return this.state.isPreview;\n  }\n  constructor(pathname1, query1, as1, {\n    initialProps,\n    pageLoader,\n    App,\n    wrapApp,\n    Component,\n    err,\n    subscription,\n    isFallback,\n    locale,\n    locales,\n    defaultLocale,\n    domainLocales,\n    isPreview\n  }) {\n    // Server Data Cache (full data requests)\n    this.sdc = {};\n    // Server Background Cache (HEAD requests)\n    this.sbc = {};\n    this.isFirstPopStateEvent = true;\n    this._key = createKey();\n    this.onPopState = e => {\n      const {\n        isFirstPopStateEvent\n      } = this;\n      this.isFirstPopStateEvent = false;\n      const state = e.state;\n      if (!state) {\n        // We get state as undefined for two reasons.\n        //  1. With older safari (< 8) and older chrome (< 34)\n        //  2. When the URL changed with #\n        //\n        // In the both cases, we don't need to proceed and change the route.\n        // (as it's already changed)\n        // But we can simply replace the state with the new changes.\n        // Actually, for (1) we don't need to nothing. But it's hard to detect that event.\n        // So, doing the following for (1) does no harm.\n        const {\n          pathname,\n          query\n        } = this;\n        this.changeState('replaceState', (0, _formatUrl).formatWithValidation({\n          pathname: (0, _addBasePath).addBasePath(pathname),\n          query\n        }), (0, _utils).getURL());\n        return;\n      }\n      // __NA is used to identify if the history entry can be handled by the app-router.\n      if (state.__NA) {\n        window.location.reload();\n        return;\n      }\n      if (!state.__N) {\n        return;\n      }\n      // Safari fires popstateevent when reopening the browser.\n      if (isFirstPopStateEvent && this.locale === state.options.locale && state.as === this.asPath) {\n        return;\n      }\n      let forcedScroll;\n      const {\n        url,\n        as,\n        options,\n        key\n      } = state;\n      if (process.env.__NEXT_SCROLL_RESTORATION) {\n        if (manualScrollRestoration) {\n          if (this._key !== key) {\n            // Snapshot current scroll position:\n            try {\n              sessionStorage.setItem('__next_scroll_' + this._key, JSON.stringify({\n                x: self.pageXOffset,\n                y: self.pageYOffset\n              }));\n            } catch (e) {}\n            // Restore old scroll position:\n            try {\n              const v = sessionStorage.getItem('__next_scroll_' + key);\n              forcedScroll = JSON.parse(v);\n            } catch (e1) {\n              forcedScroll = {\n                x: 0,\n                y: 0\n              };\n            }\n          }\n        }\n      }\n      this._key = key;\n      const {\n        pathname\n      } = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      // Make sure we don't re-render on initial load,\n      // can be caused by navigating back from an external site\n      if (this.isSsr && as === (0, _addBasePath).addBasePath(this.asPath) && pathname === (0, _addBasePath).addBasePath(this.pathname)) {\n        return;\n      }\n      // If the downstream application returns falsy, return.\n      // They will then be responsible for handling the event.\n      if (this._bps && !this._bps(state)) {\n        return;\n      }\n      this.change('replaceState', url, as, Object.assign({}, options, {\n        shallow: options.shallow && this._shallow,\n        locale: options.locale || this.defaultLocale,\n        // @ts-ignore internal value not exposed on types\n        _h: 0\n      }), forcedScroll);\n    };\n    // represents the current component key\n    const route = (0, _removeTrailingSlash).removeTrailingSlash(pathname1);\n    // set up the component cache (by route keys)\n    this.components = {};\n    // We should not keep the cache, if there's an error\n    // Otherwise, this cause issues when when going back and\n    // come again to the errored page.\n    if (pathname1 !== '/_error') {\n      this.components[route] = {\n        Component,\n        initial: true,\n        props: initialProps,\n        err,\n        __N_SSG: initialProps && initialProps.__N_SSG,\n        __N_SSP: initialProps && initialProps.__N_SSP\n      };\n    }\n    this.components['/_app'] = {\n      Component: App,\n      styleSheets: []\n    };\n    // Backwards compat for Router.router.events\n    // TODO: Should be remove the following major version as it was never documented\n    this.events = Router.events;\n    this.pageLoader = pageLoader;\n    // if auto prerendered and dynamic route wait to update asPath\n    // until after mount to prevent hydration mismatch\n    const autoExportDynamic = (0, _isDynamic).isDynamicRoute(pathname1) && self.__NEXT_DATA__.autoExport;\n    this.basePath = process.env.__NEXT_ROUTER_BASEPATH || '';\n    this.sub = subscription;\n    this.clc = null;\n    this._wrapApp = wrapApp;\n    // make sure to ignore extra popState in safari on navigating\n    // back from external site\n    this.isSsr = true;\n    this.isLocaleDomain = false;\n    this.isReady = !!(self.__NEXT_DATA__.gssp || self.__NEXT_DATA__.gip || self.__NEXT_DATA__.appGip && !self.__NEXT_DATA__.gsp || !autoExportDynamic && !self.location.search && !process.env.__NEXT_HAS_REWRITES);\n    if (process.env.__NEXT_I18N_SUPPORT) {\n      this.locales = locales;\n      this.defaultLocale = defaultLocale;\n      this.domainLocales = domainLocales;\n      this.isLocaleDomain = !!(0, _detectDomainLocale).detectDomainLocale(domainLocales, self.location.hostname);\n    }\n    this.state = {\n      route,\n      pathname: pathname1,\n      query: query1,\n      asPath: autoExportDynamic ? pathname1 : as1,\n      isPreview: !!isPreview,\n      locale: process.env.__NEXT_I18N_SUPPORT ? locale : undefined,\n      isFallback\n    };\n    this._initialMatchesMiddlewarePromise = Promise.resolve(false);\n    if (typeof window !== 'undefined') {\n      // make sure \"as\" doesn't start with double slashes or else it can\n      // throw an error as it's considered invalid\n      if (!as1.startsWith('//')) {\n        // in order for `e.state` to work on the `onpopstate` event\n        // we have to register the initial route upon initialization\n        const options = {\n          locale\n        };\n        const asPath = (0, _utils).getURL();\n        this._initialMatchesMiddlewarePromise = matchesMiddleware({\n          router: this,\n          locale,\n          asPath\n        }).then(matches => {\n          options._shouldResolveHref = as1 !== pathname1;\n          this.changeState('replaceState', matches ? asPath : (0, _formatUrl).formatWithValidation({\n            pathname: (0, _addBasePath).addBasePath(pathname1),\n            query: query1\n          }), asPath, options);\n          return matches;\n        });\n      }\n      window.addEventListener('popstate', this.onPopState);\n      // enable custom scroll restoration handling when available\n      // otherwise fallback to browser's default handling\n      if (process.env.__NEXT_SCROLL_RESTORATION) {\n        if (manualScrollRestoration) {\n          window.history.scrollRestoration = 'manual';\n        }\n      }\n    }\n  }\n}\nRouter.events = (0, _mitt).default();\nexports.default = Router;","map":{"version":3,"names":["matchesMiddleware","isLocalURL","interpolateAs","resolveHref","createKey","_normalizeTrailingSlash","require","_removeTrailingSlash","_routeLoader","_script","_isError","_interop_require_wildcard","_denormalizePagePath","_normalizeLocalePath","_mitt","_interop_require_default","_utils","_isDynamic","_parseRelativeUrl","_querystring","_resolveRewrites","_routeMatcher","_routeRegex","_formatUrl","_detectDomainLocale","_parsePath","_addLocale","_removeLocale","_removeBasePath","_addBasePath","_hasBasePath","_isApiRoute","_getNextPathnameInfo","_formatNextPathnameInfo","_compareStates","_isBot","buildCancellationError","Object","assign","Error","cancelled","options","_matchesMiddleware","apply","arguments","_async_to_generator","matchers","Promise","resolve","router","pageLoader","getMiddleware","pathname","asPathname","parsePath","asPath","cleanedAs","hasBasePath","removeBasePath","asWithBasePathAndLocale","addBasePath","addLocale","locale","some","m","RegExp","regexp","test","stripOrigin","url","origin","getLocationOrigin","startsWith","substring","length","omit","object","keys","omitted","forEach","key","includes","isAbsoluteUrl","locationOrigin","resolved","URL","_","route","query","interpolatedRoute","dynamicRegex","getRouteRegex","dynamicGroups","groups","dynamicMatches","getRouteMatcher","params","every","param","value","repeat","optional","replaced","Array","isArray","replace","map","segment","encodeURIComponent","join","result","href","resolveAs","base","urlAsString","formatWithValidation","urlProtoMatch","match","urlAsStringNoProto","slice","urlParts","split","console","error","normalizedUrl","normalizeRepeatedSlashes","finalUrl","normalizePathTrailingSlash","interpolatedAs","isDynamicRoute","searchParams","searchParamsToUrlQuery","hash","resolvedHref","_1","prepareUrlAs","as","resolvedAs","hrefWasAbsolute","asWasAbsolute","preparedUrl","preparedAs","resolveDynamicRoute","pages","cleanPathname","removeTrailingSlash","denormalizePagePath","page","re","getMiddlewareData","source","response","nextConfig","basePath","i18n","locales","trailingSlash","Boolean","process","env","__NEXT_TRAILING_SLASH","rewriteHeader","headers","get","rewriteTarget","matchedPath","parsedRewriteTarget","parseRelativeUrl","pathnameInfo","getNextPathnameInfo","parseData","fsPathname","all","getPageList","getClientBuildManifest","then","__rewrites","rewrites","normalizeLocalePath","parsedSource","__NEXT_HAS_REWRITES","default","path","matchedPage","parsedAs","resolvedPathname","matches","type","src","formatNextPathnameInfo","_extends","defaultLocale","buildId","destination","redirectTarget","newAs","newUrl","withMiddlewareEffects","_withMiddlewareEffects","fetchData","data","effect","dataHref","json","text","cacheKey","e","manualScrollRestoration","__NEXT_SCROLL_RESTORATION","window","history","v","sessionStorage","setItem","removeItem","n","SSG_DATA_NOT_FOUND","Symbol","fetchRetry","attempts","fetch","credentials","method","ok","status","handleSmoothScroll","fn","htmlElement","document","documentElement","existing","style","scrollBehavior","getClientRects","tryToParseAsJSON","JSON","parse","fetchNextData","inflightCache","isPrefetch","hasMiddleware","isServerRender","parseJSON","persistCache","isBackground","unstable_skipClientCache","location","ref1","getData","purpose","ref","notFound","markAssetError","NODE_ENV","catch","err","message","undefined","Math","random","toString","handleHardNavigation","getCancelledHandler","cancel","clc","handleCancelled","Router","reload","back","forward","push","_key","stringify","x","self","pageXOffset","y","pageYOffset","change","forcedScroll","_this","isQueryUpdating","_h","shouldResolveHref","_shouldResolveHref","nextState","state","readyStateChange","isReady","isSsr","prevLocale","__NEXT_I18N_SUPPORT","localePathResult","detectedLocale","didNavigate","detectedDomain","detectDomainLocale","domainLocales","isLocaleDomain","hostname","domain","asNoBasePath","http","ST","performance","mark","shallow","scroll","routeProps","_inFlightRoute","events","emit","removeLocale","localeChange","onlyAHashChange","changeState","scrollToHash","set","components","parsed","urlIsNew","parsedAsPathname","isMiddlewareRewrite","isMiddlewareMatch","rewritesResult","p","externalDest","routeMatch","routeRegex","shouldInterpolate","missingParams","filter","warn","ref2","ref3","ref4","routeInfo","getRouteInfo","isPreview","isFallback","cleanedParsedPathname","prefixedAs","rewriteAs","localeResult","curRouteMatch","component","Component","unstable_scriptLoader","scripts","concat","script","handleClientScriptLoad","props","__N_SSG","__N_SSP","pageProps","__N_REDIRECT","__N_REDIRECT_BASE_PATH","parsedHref","__N_PREVIEW","notFoundRoute","fetchComponent","__NEXT_DATA__","statusCode","_route","isValidShallowRoute","_scroll","shouldScroll","resetScroll","upcomingScrollState","upcomingRouterState","ref5","ref6","ref7","canSkipUpdating","compareRouterStates","lang","hashRegex","err1","getURL","_shallow","__N","handleRouteInfoError","loadErrorFail","isAssetError","styleSheets","getInitialProps","gipErr","routeInfoErr","requestedRoute","ref8","ref9","ref10","existingInfo","cachedRouteInfo","fetchNextDataParams","getDataHref","skipInterpolation","sbc","sdc","resolvedRoute","isAPIRoute","res","mod","isValidElementType","wasBailedPrefetch","shouldFetchData","_getData","fetched","getProperError","sub","beforePopState","cb","_bps","oldUrlNoHash","oldHash","newUrlNoHash","newHash","scrollTo","rawHash","decodeURIComponent","idEl","getElementById","scrollIntoView","nameEl","getElementsByName","prefetch","isBot","navigator","userAgent","originalPathname","__NEXT_MIDDLEWARE_PREFETCH","_isSsg","isSsg","priority","__NEXT_OPTIMISTIC_CLIENT_CACHE","componentResult","loadPage","_getFlightData","ctx","App","AppTree","_wrapApp","loadGetInitialProps","constructor","pathname1","query1","as1","initialProps","wrapApp","subscription","isFirstPopStateEvent","onPopState","__NA","getItem","e1","initial","autoExportDynamic","autoExport","__NEXT_ROUTER_BASEPATH","gssp","gip","appGip","gsp","search","_initialMatchesMiddlewarePromise","addEventListener","scrollRestoration"],"sources":["../../../../../src/shared/lib/router/router.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}